<!DOCTYPE html>
<html lang="es-PE">

<head>
    <title>CRUD PRODUCTOS</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">

    <!--ESTILOS ADICIONALES AGREGADOS-->
    <link rel="stylesheet" href="../resource/css/crudpersonas/personadd.css" rel="stylesheet">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <!-- LINK DE BOOTSTRAP -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8.3.1/swiper-bundle.min.css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.2/css/bootstrap.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/2.0.5/css/dataTables.bootstrap4.css" rel="stylesheet">
    <!-- ====== LINKS EXTERNOS ====== -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <!-- <link href="glightbox/css/glightbox.min.css" rel="stylesheet"> -->

    <!-- <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Kanit:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <!--ESTILOS ADICIONALES AGREGADOS-->

</head>

<body>

    

    <% if(login) { %>
        <div class="sidebar">
            <div class="logo-details">
                <i class='bx bxl-codepen icon'></i>
                <div class="logo_name">Urban Shoes</div>
                <i class='bx bx-menu' id="btn"></i>
            </div>
            <ul class="nav-list">
                <li>
                    <i class='bx bx-search'></i>
                    <input type="text" placeholder="Search...">
                    <span class="tooltip">Buscar</span>
                </li>
                <li>
                    <a href="admin">
                        <i class='bx bx-grid-alt'></i>
                        <span class="links_name">Principal</span>
                    </a>
                    <span class="tooltip">Principal</span>
                </li>
                <li>
                    <a href="#">
                        <i class='bx bx-user'></i>
                        <span class="links_name">Usuarios</span>
                    </a>
                    <span class="tooltip">Usuarios</span>
                </li>
                <li class="parent">
                    <a href="/person/personview">
                        <i class='bx bxs-user'></i>
                        <span class="links_name">Personas</span>
                    </a>
                    <span class="tooltip">Personas</span>
                    <i id="abrirsubpersona" class="bx bxs-chevron-left arrow"></i>
                    <ul class="sub-menu" id="submenu-personas">
                        <li>
                            <a href="/person/personadd">
                                <i class='bx bx-plus'></i>
                                Agregar Persona
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="parent">
                    <a href="/product/productview">
                        <i class='bx bx-package'></i>
                        <span class="links_name">Productos</span>
                    </a>
                    <span class="tooltip">Productos</span>
                        <i id="abrirsubproducto" class="bx bxs-chevron-left arrow"></i>
                        <ul class="sub-menu" id="submenu-productos">
                            <li>
                                <a href="/product/productadd">
                                    <i class='bx bx-plus'></i>
                                    Agregar Producto
                                </a>
                            </li>
                        </ul>
                </li>
                <li>
                    <a href="#">
                        <i class='bx bx-folder'></i>
                        <span class="links_name">File Manager</span>
                    </a>
                    <span class="tooltip">Files</span>
                </li>
                <li>
                    <a href="#">
                        <i class='bx bx-cart-alt'></i>
                        <span class="links_name">Order</span>
                    </a>
                    <span class="tooltip">Order</span>
                </li>
                <li>
                    <a href="#">
                        <i class='bx bx-heart'></i>
                        <span class="links_name">Saved</span>
                    </a>
                    <span class="tooltip">Saved</span>
                </li>
                <li>
                    <a href="#">
                        <i class='bx bx-cog'></i>
                        <span class="links_name">Setting</span>
                    </a>
                    <span class="tooltip">Setting</span>
                </li>

                <li>
                    <a href="#">
                        <i class='bx bxs-user-circle'></i>
                        <span class="links_name">
                            <%= name %>
                        </span>
                    </a>
                    <span class="tooltip">
                        <%= name %>
                    </span>
                </li>

                <li class="profile">
                    <div class="profile-details">
                        <i class='bx bx-export'></i>
                        <div class="name_job">
                            <div class="name">Logout</div>
                        </div>
                    </div>
                    <a href="/logout">
                        <i class='bx bx-log-out' id="log_out"></i>
                    </a>
                </li>
            </ul>
        </div>
        <% } %>

            <section class="home-section">
                <div class="col-md-13">
                    <div class="box-container mb-3">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h1 class="jeje text-center">Registrar Persona</h1>
                        </div>
                        <div class="modesys">
                            <div class="select-image">
                                <img src="../resource/img/plus/dark.svg" style="width: 169px; height: 80px;" alt="Dark Mode"
                                    id="darkImage">
                                <img src="../resource/img/plus/light.svg" style="width: 169px; height: 80px;" alt="Light Mode"
                                    id="lightImage">
                            </div>
                            <label class="switch">
                                <input type="checkbox" id="input">
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
                <div class="col-md-13">
                    <form action="/newperson" method="POST" enctype="multipart/form-data" id="form2" class="form_container">
                        <div class="card">
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <label for="dni" class="form-label">DNI:</label>
                                        <input placeholder="Dni" name="dni" type="number" class="form-control" id="dni">
                                    </div>
                                </div> 
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <label for="nombre" class="form-label">Nombre:</label>
                                        <input placeholder="Nombre" name="nombre" type="text" class="form-control" id="nombre">
                                    </div>
                                </div> 
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <label for="imagen" class="form-label">Imagen:</label>
                                        <div class="input-group">
                                            <input placeholder="Imagen" name="imagen" type="file" class="form-control" id="imagen" onchange="mostrarVistaPrevia()">
                                            <label class="input-group-text" for="imagen">Seleccionar</label>
                                        </div>
                                    </div>
                                </div> 
                                <div class="row mb-3">
                                    <div class="col-md-5">
                                        <div id="vistaPreviaContainer" class="text-center">
                                            <img id="vistaPreviaImagen" alt="Vista previa de la imagen" class="img-thumbnail">
                                        </div>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-5 text-center">
                                        <input type="submit" id="btnF2" value="Agregar" class="btn btn-primary">
                                        <a href="/person/personview" id="btnF2" class="btn btn-secondary">Cancelar</a>
                                    </div>
                                </div> 
                            </div>
                        </div>
                    </form>
                </div>
                    
                


                <!-- 
                <div class="card-body">
                    <form action="/newperson" method="POST" enctype="multipart/form-data" id="form2" class="form_container">
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="dni-addon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    class="bi bi-person-badge" viewBox="0 0 16 16">
                                    <path
                                        d="M0 0h16v16H0V0zm13.684 11.68c.837-.725 1.316-1.743 1.316-2.826 0-2.206-2.111-4-4.737-4S5.526 6.648 5.526 8.853c0 1.083.48 2.101 1.316 2.826C4.18 11.858 2 13.644 2 14.66V15c0 .182.147.34.331.34h11.338c.184 0 .331-.158.331-.34v-.34c0-1.016-2.18-2.802-4.316-3.98zM8 3.5c.97 0 1.753-.784 1.753-1.75C9.753.784 8.97 0 8 0S6.247.784 6.247 1.75c0 .966.783 1.75 1.753 1.75z" />
                                    <path
                                        d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1.5c-.402 0-.751-.224-1.03-.55.119-.215.338-.45.646-.684.407-.337.872-.648 1.385-.935.512.287.978.598 1.385.935.307.234.526.469.646.684-.279.326-.628.55-1.03.55z" />
                                </svg>
                            </span>
                            <input placeholder="Dni" name="dni" type="number" class="form-control" id="dni">
                        </div>
                    
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="nombre-addon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    class="iconoForm icon bi bi-person-circle" viewBox="0 0 16 16">
                                    <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" fill="#000000"></path>
                                    <path fill-rule="evenodd"
                                        d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
                                        fill="#000000"></path>
                                </svg>
                            </span>
                            <input placeholder="Nombre" name="nombre" type="text" class="form-control" id="nombre">
                        </div>
                    
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="imagen-addon">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    class="bi bi-phone" viewBox="0 0 16 16">
                                    <path
                                        d="M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h6zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H5z" />
                                    <path d="M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2z" />
                                </svg>
                            </span>
                            <input placeholder="Imagen" name="imagen" type="file" class="form-control" id="imagen"
                                onchange="mostrarVistaPrevia()">
                        </div>
                    
                        <div class="text-center mb-3">
                            <div id="vistaPreviaContainer">
                                <img id="vistaPreviaImagen" src="#" alt="Vista previa de la imagen" class="img-thumbnail">
                            </div>
                        </div>
                    
                        <div class="input-group">
                            <button type="submit" id="btnF2" class="btn btn-primary me-2">Agregar</button>
                            <a href="crudpersonas" id="btnF2" class="btn btn-secondary">Cancelar</a>
                        </div>
                    
                    </form>
                </div>
                
                OTROOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOOO-.---------------------------------------------

                    <div class="container">
                        <form action="/newperson" method="POST" enctype="multipart/form-data" id="form2" class="form-body">
                            
                            <div class="row">
                                <div>
                                    <label for="dni" class="form-label" id="jxjxjx" >DNI</label>
                                    <input placeholder="Dni" name="dni" type="text" class="dni" id="dni">
                                </div>
                                <div class="imgss">
                                    <label for="imagen" class="form-label">Imagen</label>
                                    <input placeholder="Imagen" name="imagen" type="file" class="previ" id="imagen" onchange="mostrarVistaPrevia()">
                                </div>
                            </div>
                            <div class="row">
                                <div>
                                        <label for="nombre" class="form-label">Nombre</label>
                                        <input placeholder="Nombre" name="nombre" type="text" class="nombre" id="nombre">
                                    </div>
                                
                                
                            </div>
                            <div id="vistaPreviaContainer" class="text-center">
                                    <img id="vistaPreviaImagen">
                                </div>
                            <div class="xddd">
                                <div>
                                    <input type="submit" id="btnF2" value="Agregar Persona" class="btn-agregar">
                                    <a href="/person/personview" id="btnF2" class="btn-cancel">Cancelar</a>
                                </div>
                            </div>
                        </form>
                    </div>
                
                    -->

            </section>


            <!-- Previsualizacion de las imagenes 
            <script>
                function mostrarVistaPrevia(idInput, idImagen) {
                    var archivo = document.getElementById(idInput).files[0];
                    var vistaPrevia = document.getElementById(idImagen);
                    if (archivo) {
                        var lector = new FileReader();
                        lector.onload = function (e) {
                            vistaPrevia.src = e.target.result;
                            vistaPrevia.style.display = 'block';
                        }
                        lector.readAsDataURL(archivo);
                    }
                }  
            </script>

            <!-- Abrir el navbar -->
            <script>
                let sidebar = document.querySelector(".sidebar");
                let closeBtn = document.querySelector("#btn");
                let searchBtn = document.querySelector(".bx-search");

                closeBtn.addEventListener("click", () => {
                    sidebar.classList.toggle("open");
                    menuBtnChange();
                });

                searchBtn.addEventListener("click", () => {
                    sidebar.classList.toggle("open");
                    menuBtnChange();
                });

                function menuBtnChange() {
                    if (sidebar.classList.contains("open")) {
                        closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
                    } else {
                        closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");
                    }
                }
            </script>
            <!-- Modo Dark -->
            <script>
                // Detectar la preferencia del sistema
                const prefersDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

                // Obtener las imágenes
                const darkImage = document.getElementById('darkImage');
                const lightImage = document.getElementById('lightImage');

                // Función para aplicar el tema oscuro
                function applyDarkMode() {
                    document.body.classList.add('dark-mode');
                    darkImage.style.display = 'none';
                    lightImage.style.display = 'block';
                    document.getElementById('input').checked = true;
                }

                // Función para aplicar el tema claro
                function applyLightMode() {
                    document.body.classList.remove('dark-mode');
                    darkImage.style.display = 'block';
                    lightImage.style.display = 'none';
                }

                // Aplicar el tema según la preferencia guardada o la preferencia del sistema
                const selectedTheme = localStorage.getItem('theme');
                if (selectedTheme === 'dark' || (selectedTheme === null && prefersDarkMode)) {
                    applyDarkMode();
                } else {
                    applyLightMode();
                }

                // Cambiar el tema cuando se active el interruptor
                document.getElementById('input').addEventListener('change', () => {
                    if (document.body.classList.contains('dark-mode')) {
                        applyLightMode();
                        localStorage.setItem('theme', 'light'); // Guardar el tema seleccionado en el almacenamiento local
                    } else {
                        applyDarkMode();
                        localStorage.setItem('theme', 'dark'); // Guardar el tema seleccionado en el almacenamiento local
                    }
                });   
            </script>

            <!-- Sub Menu Producto -->
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const submenuToggle = document.getElementById('abrirsubproducto');
                    const submenu = document.getElementById('submenu-productos');

                    submenuToggle.addEventListener('click', function (event) {
                        event.stopPropagation(); // Evita la redirección al hacer clic en el triángulo
                        this.classList.toggle('rotated');
                        submenu.classList.toggle('show');
                    });
                });
            </script>
            <!-- Sub Menu Persona -->
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const submenuToggle = document.getElementById('abrirsubpersona');
                    const submenu = document.getElementById('submenu-personas');

                    submenuToggle.addEventListener('click', function (event) {
                        event.stopPropagation(); // Evita la redirección al hacer clic en el triángulo
                        this.classList.toggle('rotated');
                        submenu.classList.toggle('show');
                    });
                });
            </script>
            <!-- Previsualizar imagenes en la tabla -->
            <script>
                function mostrarVistaPrevia() {
                    var archivo = document.querySelector('input[type=file]').files[0];
                    var vistaPrevia = document.getElementById('vistaPreviaImagen');

                    if (archivo) {
                        var lector = new FileReader();
                        lector.onload = function (e) {
                            vistaPrevia.src = e.target.result;
                            vistaPrevia.style.display = 'block';
                        }
                        lector.readAsDataURL(archivo);
                    }
                }
            </script>

            <!-- SCRIPT BOOTSTRAP -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

            <script src="https://unpkg.com/typewriter-effect@latest/dist/core.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/swiper@8.3.1/swiper-bundle.min.js"></script>
            <script src="https://kit.fontawesome.com/1f4346c153.js" crossorigin="anonymous"></script>
</body>

</html>